<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{csp}}
    <title>AG Usage</title>
    <link rel="stylesheet" href="{{styleUri}}">
</head>

<body>
    <div class="header">
        <h1>AG STATUS</h1>
        <button class="refresh-btn" id="refresh">Refresh</button>
    </div>

    <!-- GLOBAL CREDITS -->
    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-title">Prompt Credits (Monthly)</div>
        <div style="display: flex; align-items: baseline;">
            <div class="metric-large" id="credits-avail">--</div>
            <div class="metric-sub" style="margin-left: 10px;"> / <span id="credits-total">--</span></div>
        </div>
        <div class="bar-container">
            <div class="bar-fill" id="credits-bar" style="width: 0%"></div>
        </div>
    </div>

    <!-- WEEKLY ACTIVITY -->
    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-title">Estimated Weekly Activity (Rolling 7 Days)</div>
        <div style="display: flex; align-items: baseline;">
            <div class="metric-large" id="weekly-usage">0.0</div>
            <div class="metric-sub" style="margin-left: 10px;"> Quotas Used</div>
        </div>
        <div class="metric-sub" style="margin-top: 5px; opacity: 0.7;">
            Based on local tracking of quota drops.
        </div>
    </div>

    <!-- MODELS GRID -->
    <div class="grid" id="models-grid">
        <!-- Populated by dashboard.js -->
    </div>

    <!-- VSCode API must be acquired in inline script -->
    <script>
        // Acquire VSCode API and expose it globally for dashboard.js
        window.vscodeApi = acquireVsCodeApi();
    </script>

    <!-- External dashboard logic -->
    <script src="{{scriptUri}}"></script>
</body>

</html>